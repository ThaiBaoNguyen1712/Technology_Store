<style>
    .otp-field {
        display: flex;
        flex-direction: row;
        column-gap: 10px;
        align-items: center;
        justify-content: center;
    }

        .otp-field input {
            height: 45px;
            width: 42px;
            border-radius: 6px;
            outline: none;
            font-size: 1.125rem;
            text-align: center;
            border: 1px solid #ddd;
        }

            .otp-field input:focus {
                box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
            }

            .otp-field input::-webkit-inner-spin-button,
            .otp-field input::-webkit-outer-spin-button {
                display: none;
            }

    .resend {
        font-size: 12px;
    }

    .footer {
        position: absolute;
        bottom: 10px;
        right: 10px;
        color: black;
        font-size: 12px;
        text-align: right;
        font-family: monospace;
    }

        .footer a {
            color: black;
            text-decoration: none;
        }


</style>

<!-- Modal cho form OTP đơn giản -->
<div class="modal fade" style="max-height:60vh" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-sm btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

            </div>
            <div class="modal-body" style="max-height:50vh!important">
                <section class="container-fluid bg-body-tertiary d-block">
                    <div class="row justify-content-center">
                        <div class="col-12 col-md-6 col-lg-4" style="min-width: 500px;">
                            <div class="card-body p-5 text-center">
                                <h4>Xác thực</h4>
                                <p>Mã xác thực đã được gửi qua Email</p>

                                <div class="otp-field mb-4">
                                    <input type="number" />
                                    <input type="number" disabled />
                                    <input type="number" disabled />
                                    <input type="number" disabled />
                                    <input type="number" disabled />
                                    <input type="number" disabled />
                                </div>

                                <button class="btn btn-primary mb-3" disabled>
                                    Xác thực
                                </button>

                                <p class="resend text-muted mb-0">
                                   Chưa nhận được mã? <a href="#">Gửi lại</a>
                                </p>
                   
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>

<!-- Script -->
<script>
    const inputs = document.querySelectorAll(".otp-field > input");
    const verifyButton = document.querySelector(".btn");

    window.addEventListener("load", () => inputs[0].focus());

    inputs[0].addEventListener("paste", function (event) {
        event.preventDefault();
        const pastedValue = (event.clipboardData || window.clipboardData).getData("text").split("");

        inputs.forEach((input, index) => {
            if (pastedValue[index]) {
                input.value = pastedValue[index];
                if (input.nextElementSibling) input.nextElementSibling.removeAttribute("disabled");
            }
        });

        checkAllInputsFilled();
    });

    inputs.forEach((input, index) => {
        input.addEventListener("keyup", (e) => {
            const nextInput = input.nextElementSibling;
            const prevInput = input.previousElementSibling;

            if (input.value.length > 1) {
                input.value = input.value[0];
            }

            if (nextInput && input.value !== "") {
                nextInput.removeAttribute("disabled");
                nextInput.focus();
            }

            if (e.key === "Backspace" && prevInput) {
                prevInput.focus();
                prevInput.setAttribute("disabled", true);
                input.value = "";
            }

            checkAllInputsFilled();
        });
    });

    function checkAllInputsFilled() {
        let allFilled = true;
        inputs.forEach(input => {
            if (input.disabled || input.value === "") {
                allFilled = false;
            }
        });

        if (allFilled) {
            verifyButton.removeAttribute("disabled");
        } else {
            verifyButton.setAttribute("disabled", "disabled");
        }
    }
</script>
